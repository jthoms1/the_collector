---
import Layout from '../../layouts/Layout.astro';
import ItemGrid from '../../components/ItemGrid.astro';
import { getItems, getCollectionTypeByName, countItems } from '../../lib/db';

const cardsType = getCollectionTypeByName('Cards');
const typeId = cardsType?.id;
const items = typeId ? getItems(typeId, 100, 0) : [];
const total = typeId ? countItems(typeId) : 0;
---

<Layout title="Cards Collection">
  <div class="flex items-center justify-between mb-8">
    <div>
      <h1 class="page-title">Cards Collection</h1>
      <p class="text-gray-500 mt-1">{total} {total === 1 ? 'card' : 'cards'} in your collection</p>
    </div>
    <a href="/cards/new" class="btn-primary">
      <svg class="w-5 h-5 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4" />
      </svg>
      Add Card
    </a>
  </div>

  <ItemGrid items={items} emptyMessage="No cards in your collection yet. Add your first card!" />
</Layout>
